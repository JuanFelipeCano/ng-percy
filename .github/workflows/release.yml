name: Release

on:
  workflow_run:
    workflows: ["Build and Test"]
    types:
      - completed

jobs:
  release:
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    runs-on: ubuntu-latest

    steps:
      # 1. Download build artifacts
      - name: Download build artifacts
        uses: actions/download-artifact@v3
        with:
          name: build

      # 2. Configure Node.js
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 20

      - name: ls
        run: ls dist/percy

      # 3. Authenticate with npm
      #- name: Authenticate with npm
      #  env:
      #    NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}

      # 4. Publicar en npm
      #- name: Publish to npm
      #  run: npm publish dist/percy
